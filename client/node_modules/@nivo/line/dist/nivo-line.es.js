import{memo as e,useMemo as i,useId as o,useState as r,useCallback as n,createElement as t,Fragment as a,forwardRef as s,useRef as l,useEffect as u}from"react";import{useTheme as d,lineCurvePropType as c,blendModePropType as h,motionPropTypes as f,defsPropTypes as p,curveFromProp as v,useValueFormatter as y,useMotionConfig as b,useAnimatedPath as m,getLabelGenerator as g,DotsItem as x,withContainer as R,useDimensions as T,CartesianMarkers as q,bindDefs as M,SvgWrapper as O,ResponsiveWrapper as S,getRelativeCursor as C,isCursorInRect as w}from"@nivo/core";import{ordinalColorsPropType as k,useOrdinalColorScale as B,useInheritedColor as E}from"@nivo/colors";import{axisPropType as L,Grid as W,Axes as G,renderGridLinesToCanvas as P,renderAxesToCanvas as j}from"@nivo/axes";import{LegendPropShape as F,BoxLegendSvg as V,renderLegendToCanvas as Y}from"@nivo/legends";import{BasicTooltip as D,TableTooltip as X,Chip as A,useTooltip as I,Crosshair as z}from"@nivo/tooltip";import{line as H,area as J}from"d3-shape";import{computeXYScalesForSeries as K}from"@nivo/scales";import N from"prop-types";import{jsx as Q,jsxs as U}from"react/jsx-runtime";import{useSpring as Z,animated as $}from"@react-spring/web";import{Mesh as _,useVoronoiMesh as ee,renderVoronoiToCanvas as ie,renderVoronoiCellToCanvas as oe}from"@nivo/voronoi";function re(){return re=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var o=arguments[i];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},re.apply(this,arguments)}var ne=function(e){var i=e.point;return Q(D,{id:U("span",{children:["x: ",Q("strong",{children:i.data.xFormatted}),", y:"," ",Q("strong",{children:i.data.yFormatted})]}),enableChip:!0,color:i.serieColor})};ne.propTypes={point:N.object.isRequired};var te=e(ne),ae=function(e){var i=e.slice,o=e.axis,r=d(),n="x"===o?"y":"x";return Q(X,{rows:i.points.map((function(e){return[Q(A,{color:e.serieColor,style:r.tooltip.chip},"chip"),e.serieId,Q("span",{style:r.tooltip.tableCellValue,children:e.data[n+"Formatted"]},"value")]}))})};ae.propTypes={slice:N.object.isRequired,axis:N.oneOf(["x","y"]).isRequired};var se=e(ae),le={data:N.arrayOf(N.shape({id:N.oneOfType([N.string,N.number]).isRequired,data:N.arrayOf(N.shape({x:N.oneOfType([N.number,N.string,N.instanceOf(Date)]),y:N.oneOfType([N.number,N.string,N.instanceOf(Date)])})).isRequired})).isRequired,xScale:N.object.isRequired,xFormat:N.oneOfType([N.func,N.string]),yScale:N.object.isRequired,yFormat:N.oneOfType([N.func,N.string]),layers:N.arrayOf(N.oneOfType([N.oneOf(["grid","markers","axes","areas","crosshair","lines","slices","points","mesh","legends"]),N.func])).isRequired,curve:c.isRequired,axisTop:L,axisRight:L,axisBottom:L,axisLeft:L,enableGridX:N.bool.isRequired,enableGridY:N.bool.isRequired,gridXValues:N.oneOfType([N.number,N.arrayOf(N.oneOfType([N.number,N.string,N.instanceOf(Date)]))]),gridYValues:N.oneOfType([N.number,N.arrayOf(N.oneOfType([N.number,N.string,N.instanceOf(Date)]))]),enablePoints:N.bool.isRequired,pointSymbol:N.func,pointSize:N.number.isRequired,pointColor:N.any.isRequired,pointBorderWidth:N.number.isRequired,pointBorderColor:N.any.isRequired,enablePointLabel:N.bool.isRequired,pointLabel:N.oneOfType([N.string,N.func]).isRequired,markers:N.arrayOf(N.shape({axis:N.oneOf(["x","y"]).isRequired,value:N.oneOfType([N.number,N.string,N.instanceOf(Date)]).isRequired,style:N.object})),colors:k.isRequired,enableArea:N.bool.isRequired,areaOpacity:N.number.isRequired,areaBlendMode:h.isRequired,areaBaselineValue:N.oneOfType([N.number,N.string,N.instanceOf(Date)]).isRequired,lineWidth:N.number.isRequired,legends:N.arrayOf(N.shape(F)).isRequired,isInteractive:N.bool.isRequired,debugMesh:N.bool.isRequired,tooltip:N.oneOfType([N.func,N.object]).isRequired,enableSlices:N.oneOf(["x","y",!1]).isRequired,debugSlices:N.bool.isRequired,sliceTooltip:N.oneOfType([N.func,N.object]).isRequired,enableCrosshair:N.bool.isRequired,crosshairType:N.string.isRequired},ue=re({},le,{enablePointLabel:N.bool.isRequired,role:N.string.isRequired,useMesh:N.bool.isRequired,enableTouchCrosshair:N.bool},f,p),de=re({pixelRatio:N.number.isRequired},le),ce={curve:"linear",xScale:{type:"point"},yScale:{type:"linear",min:0,max:"auto"},layers:["grid","markers","axes","areas","crosshair","lines","points","slices","mesh","legends"],axisBottom:{},axisLeft:{},enableGridX:!0,enableGridY:!0,enablePoints:!0,pointSize:6,pointColor:{from:"color"},pointBorderWidth:0,pointBorderColor:{theme:"background"},enablePointLabel:!1,pointLabel:"yFormatted",colors:{scheme:"nivo"},enableArea:!1,areaBaselineValue:0,areaOpacity:.2,areaBlendMode:"normal",lineWidth:2,legends:[],isInteractive:!0,tooltip:te,enableSlices:!1,debugSlices:!1,sliceTooltip:se,debugMesh:!1,enableCrosshair:!0,crosshairType:"bottom-left"},he=re({},ce,{enablePointLabel:!1,useMesh:!1,enableTouchCrosshair:!1,animate:!0,motionConfig:"gentle",defs:[],fill:[],role:"img"}),fe=re({},ce,{pixelRatio:"undefined"!=typeof window&&window.devicePixelRatio||1}),pe=function(e){var o=e.curve;return i((function(){return H().defined((function(e){return null!==e.x&&null!==e.y})).x((function(e){return e.x})).y((function(e){return e.y})).curve(v(o))}),[o])},ve=function(e){var o=e.curve,r=e.yScale,n=e.areaBaselineValue;return i((function(){return J().defined((function(e){return null!==e.x&&null!==e.y})).x((function(e){return e.x})).y1((function(e){return e.y})).curve(v(o)).y0(r(n))}),[o,r,n])},ye=function(e){var o=e.componentId,r=e.enableSlices,n=e.points,t=e.width,a=e.height;return i((function(){if(!1===r)return[];if("x"===r){var e=new Map;return n.forEach((function(i){null!==i.data.x&&null!==i.data.y&&(e.has(i.x)?e.get(i.x).push(i):e.set(i.x,[i]))})),Array.from(e.entries()).sort((function(e,i){return e[0]-i[0]})).map((function(e,i,r){var n,s,l=e[0],u=e[1],d=r[i-1],c=r[i+1];return n=d?l-(l-d[0])/2:l,s=c?l-n+(c[0]-l)/2:t-n,{id:"slice"+o+l,x0:n,x:l,y0:0,y:0,width:s,height:a,points:u.reverse()}}))}if("y"===r){var i=new Map;return n.forEach((function(e){null!==e.data.x&&null!==e.data.y&&(i.has(e.y)?i.get(e.y).push(e):i.set(e.y,[e]))})),Array.from(i.entries()).sort((function(e,i){return e[0]-i[0]})).map((function(e,i,o){var r,n,s=e[0],l=e[1],u=o[i-1],d=o[i+1];return r=u?s-(s-u[0])/2:s,n=d?s-r+(d[0]-s)/2:a-r,{id:s,x0:0,x:0,y0:r,y:s,width:t,height:n,points:l.reverse()}}))}}),[o,r,a,n,t])},be=function(e){var t=e.data,a=e.xScale,s=void 0===a?he.xScale:a,l=e.xFormat,u=e.yScale,c=void 0===u?he.yScale:u,h=e.yFormat,f=e.width,p=e.height,v=e.colors,b=void 0===v?he.colors:v,m=e.curve,g=void 0===m?he.curve:m,x=e.areaBaselineValue,R=void 0===x?he.areaBaselineValue:x,T=e.pointColor,q=void 0===T?he.pointColor:T,M=e.pointBorderColor,O=void 0===M?he.pointBorderColor:M,S=e.enableSlices,C=void 0===S?he.enableSlicesTooltip:S,w=o(),k=y(l),L=y(h),W=B(b,"id"),G=d(),P=E(q,G),j=E(O,G),F=r([]),V=F[0],Y=F[1],D=i((function(){return K(t.filter((function(e){return-1===V.indexOf(e.id)})),s,c,f,p)}),[t,V,s,c,f,p]),X=D.xScale,A=D.yScale,I=D.series,z=i((function(){var e=t.map((function(e){return{id:e.id,label:e.id,color:W(e)}})),i=e.map((function(e){return re({},I.find((function(i){return i.id===e.id})),{color:e.color})})).filter((function(e){return Boolean(e.id)}));return{legendData:e.map((function(e){return re({},e,{hidden:!i.find((function(i){return i.id===e.id}))})})).reverse(),series:i}}),[t,I,W]),H=z.legendData,J=z.series,N=n((function(e){Y((function(i){return i.indexOf(e)>-1?i.filter((function(i){return i!==e})):[].concat(i,[e])}))}),[]),Q=function(e){var o=e.series,r=e.getPointColor,n=e.getPointBorderColor,t=e.formatX,a=e.formatY;return i((function(){return o.reduce((function(e,i){return[].concat(e,i.data.filter((function(e){return null!==e.position.x&&null!==e.position.y})).map((function(o,s){var l={id:i.id+"."+s,index:e.length+s,serieId:i.id,serieColor:i.color,x:o.position.x,y:o.position.y};return l.color=r(i),l.borderColor=n(l),l.data=re({},o.data,{xFormatted:t(o.data.x),yFormatted:a(o.data.y)}),l})))}),[])}),[o,r,n,t,a])}({series:J,getPointColor:P,getPointBorderColor:j,formatX:k,formatY:L}),U=ye({componentId:w,enableSlices:C,points:Q,width:f,height:p});return{legendData:H,toggleSerie:N,lineGenerator:pe({curve:g}),areaGenerator:ve({curve:g,yScale:A,areaBaselineValue:R}),getColor:W,series:J,xScale:X,yScale:A,slices:U,points:Q}},me=function(e){var i=e.areaBlendMode,o=e.areaOpacity,r=e.color,n=e.fill,t=e.path,a=b(),s=a.animate,l=a.config,u=m(t),d=Z({color:r,config:l,immediate:!s});return Q($.path,{d:u,fill:n||d.color,fillOpacity:o,strokeWidth:0,style:{mixBlendMode:i}})};me.propTypes={areaBlendMode:h.isRequired,areaOpacity:N.number.isRequired,color:N.string,fill:N.string,path:N.string.isRequired};var ge=function(e){var i=e.areaGenerator,o=e.areaOpacity,r=e.areaBlendMode,n=e.lines.slice(0).reverse();return Q("g",{children:n.map((function(e){return Q(me,re({path:i(e.data.map((function(e){return e.position})))},re({areaOpacity:o,areaBlendMode:r},e)),e.id)}))})};ge.propTypes={areaGenerator:N.func.isRequired,areaOpacity:N.number.isRequired,areaBlendMode:h.isRequired,lines:N.arrayOf(N.object).isRequired};var xe=e(ge),Re=function(e){var o=e.lineGenerator,r=e.points,n=e.color,t=e.thickness,a=i((function(){return o(r)}),[o,r]),s=m(a);return Q($.path,{d:s,fill:"none",strokeWidth:t,stroke:n})};Re.propTypes={points:N.arrayOf(N.shape({x:N.oneOfType([N.string,N.number]),y:N.oneOfType([N.string,N.number])})),lineGenerator:N.func.isRequired,color:N.string.isRequired,thickness:N.number.isRequired};var Te=e(Re),qe=function(e){var i=e.lines,o=e.lineGenerator,r=e.lineWidth;return i.slice(0).reverse().map((function(e){var i=e.id,n=e.data,t=e.color;return Q(Te,{id:i,points:n.map((function(e){return e.position})),lineGenerator:o,color:t,thickness:r},i)}))};qe.propTypes={lines:N.arrayOf(N.shape({id:N.oneOfType([N.string,N.number]).isRequired,color:N.string.isRequired,data:N.arrayOf(N.shape({data:N.shape({x:N.oneOfType([N.string,N.number,N.instanceOf(Date)]),y:N.oneOfType([N.string,N.number,N.instanceOf(Date)])}).isRequired,position:N.shape({x:N.number,y:N.number}).isRequired})).isRequired})).isRequired,lineWidth:N.number.isRequired,lineGenerator:N.func.isRequired};var Me=e(qe),Oe=function(e){var i=e.slice,o=e.slices,r=e.axis,a=e.debug,s=e.tooltip,l=e.isCurrent,u=e.setCurrent,d=e.onMouseEnter,c=e.onMouseMove,h=e.onMouseLeave,f=e.onClick,p=e.onTouchStart,v=e.onTouchMove,y=e.onTouchEnd,b=I(),m=b.showTooltipFromEvent,g=b.hideTooltip,x=n((function(e){m(t(s,{slice:i,axis:r}),e,"right"),u(i),d&&d(i,e)}),[m,s,i,r,u,d]),R=n((function(e){m(t(s,{slice:i,axis:r}),e,"right"),c&&c(i,e)}),[m,s,i,r,c]),T=n((function(e){g(),u(null),h&&h(i,e)}),[g,u,h,i]),q=n((function(e){f&&f(i,e)}),[i,f]),M=n((function(e){m(t(s,{slice:i,axis:r}),e,"right"),u(i),p&&p(i,e)}),[r,p,u,m,i,s]),O=n((function(e){var n=e.touches[0],a=document.elementFromPoint(n.clientX,n.clientY),l=null==a?void 0:a.getAttribute("data-ref");if(l){var d=o.find((function(e){return e.id===l}));d&&(m(t(s,{slice:d,axis:r}),e,"right"),u(d))}v&&v(i,e)}),[r,v,u,m,i,o,s]),S=n((function(e){g(),u(null),y&&y(i,e)}),[g,u,y,i]);return Q("rect",{x:i.x0,y:i.y0,width:i.width,height:i.height,stroke:"red",strokeWidth:a?1:0,strokeOpacity:.75,fill:"red",fillOpacity:l&&a?.35:0,onMouseEnter:x,onMouseMove:R,onMouseLeave:T,onClick:q,onTouchStart:M,onTouchMove:O,onTouchEnd:S,"data-ref":i.id})};Oe.propTypes={slice:N.object.isRequired,slices:N.arrayOf(N.object).isRequired,axis:N.oneOf(["x","y"]).isRequired,debug:N.bool.isRequired,height:N.number.isRequired,tooltip:N.oneOfType([N.func,N.object]),isCurrent:N.bool.isRequired,setCurrent:N.func.isRequired,onMouseEnter:N.func,onMouseMove:N.func,onMouseLeave:N.func,onClick:N.func};var Se=e(Oe),Ce=function(e){var i=e.slices,o=e.axis,r=e.debug,n=e.height,t=e.tooltip,a=e.current,s=e.setCurrent,l=e.onMouseEnter,u=e.onMouseMove,d=e.onMouseLeave,c=e.onClick,h=e.onTouchStart,f=e.onTouchMove,p=e.onTouchEnd;return i.map((function(e){return Q(Se,{slice:e,slices:i,axis:o,debug:r,height:n,tooltip:t,setCurrent:s,isCurrent:null!==a&&a.id===e.id,onMouseEnter:l,onMouseMove:u,onMouseLeave:d,onClick:c,onTouchStart:h,onTouchMove:f,onTouchEnd:p},e.id)}))};Ce.propTypes={slices:N.arrayOf(N.shape({id:N.oneOfType([N.number,N.string,N.instanceOf(Date)]).isRequired,x:N.number.isRequired,y:N.number.isRequired,points:N.arrayOf(N.object).isRequired})).isRequired,axis:N.oneOf(["x","y"]).isRequired,debug:N.bool.isRequired,height:N.number.isRequired,tooltip:N.oneOfType([N.func,N.object]).isRequired,current:N.object,setCurrent:N.func.isRequired,onMouseEnter:N.func,onMouseMove:N.func,onMouseLeave:N.func,onClick:N.func,onTouchStart:N.func,onTouchMove:N.func,onTouchEnd:N.func};var we=e(Ce),ke=function(e){var i=e.points,o=e.symbol,r=e.size,n=e.borderWidth,t=e.enableLabel,a=e.label,s=e.labelYOffset,l=d(),u=g(a),c=i.slice(0).reverse().map((function(e){return{id:e.id,x:e.x,y:e.y,datum:e.data,fill:e.color,stroke:e.borderColor,label:t?u(e.data):null}}));return Q("g",{children:c.map((function(e){return Q(x,{x:e.x,y:e.y,datum:e.datum,symbol:o,size:r,color:e.fill,borderWidth:n,borderColor:e.stroke,label:e.label,labelYOffset:s,theme:l},e.id)}))})};ke.propTypes={points:N.arrayOf(N.object),symbol:N.func,size:N.number.isRequired,color:N.func.isRequired,borderWidth:N.number.isRequired,borderColor:N.func.isRequired,enableLabel:N.bool.isRequired,label:N.oneOfType([N.string,N.func]).isRequired,labelYOffset:N.number};var Be=e(ke),Ee=function(e){var i=e.points,o=e.width,r=e.height,a=e.margin,s=e.setCurrent,l=e.onMouseEnter,u=e.onMouseMove,d=e.onMouseLeave,c=e.onClick,h=e.onTouchStart,f=e.onTouchMove,p=e.onTouchEnd,v=e.tooltip,y=e.debug,b=e.enableTouchCrosshair,m=I(),g=m.showTooltipAt,x=m.hideTooltip,R=n((function(e,i){g(t(v,{point:e}),[e.x+a.left,e.y+a.top],"top"),s(e),l&&l(e,i)}),[s,g,v,l,a]),T=n((function(e,i){g(t(v,{point:e}),[e.x+a.left,e.y+a.top],"top"),s(e),u&&u(e,i)}),[g,v,a.left,a.top,s,u]),q=n((function(e,i){x(),s(null),d&&d(e,i)}),[x,s,d]),M=n((function(e,i){c&&c(e,i)}),[c]),O=n((function(e,i){g(t(v,{point:e}),[e.x+a.left,e.y+a.top],"top"),s(e),h&&h(e,i)}),[a.left,a.top,h,s,g,v]),S=n((function(e,i){g(t(v,{point:e}),[e.x+a.left,e.y+a.top],"top"),s(e),f&&f(e,i)}),[a.left,a.top,f,s,g,v]),C=n((function(e,i){x(),s(null),p&&p(e,i)}),[p,x,s]);return Q(_,{nodes:i,width:o,height:r,onMouseEnter:R,onMouseMove:T,onMouseLeave:q,onClick:M,onTouchStart:O,onTouchMove:S,onTouchEnd:C,enableTouchCrosshair:b,debug:y})};Ee.propTypes={points:N.arrayOf(N.object).isRequired,width:N.number.isRequired,height:N.number.isRequired,margin:N.object.isRequired,setCurrent:N.func.isRequired,onMouseEnter:N.func,onMouseMove:N.func,onMouseLeave:N.func,onClick:N.func,onTouchStart:N.func,onTouchMove:N.func,onTouchEnd:N.func,tooltip:N.oneOfType([N.func,N.object]).isRequired,debug:N.bool.isRequired};var Le=e(Ee),We=function(e){var i=e.data,o=e.xScale,n=void 0===o?{type:"point"}:o,t=e.xFormat,s=e.yScale,l=void 0===s?{type:"linear",min:0,max:"auto"}:s,u=e.yFormat,c=e.layers,h=void 0===c?["grid","markers","axes","areas","crosshair","lines","points","slices","mesh","legends"]:c,f=e.curve,p=void 0===f?"linear":f,v=e.areaBaselineValue,y=void 0===v?0:v,b=e.colors,m=void 0===b?{scheme:"nivo"}:b,g=e.margin,x=e.width,R=e.height,S=e.axisTop,C=e.axisRight,w=e.axisBottom,k=void 0===w?{}:w,B=e.axisLeft,L=void 0===B?{}:B,P=e.enableGridX,j=void 0===P||P,F=e.enableGridY,Y=void 0===F||F,D=e.gridXValues,X=e.gridYValues,A=e.lineWidth,I=void 0===A?2:A,H=e.enableArea,J=void 0!==H&&H,K=e.areaOpacity,N=void 0===K?.2:K,U=e.areaBlendMode,Z=void 0===U?"normal":U,$=e.enablePoints,_=void 0===$||$,ee=e.pointSymbol,ie=e.pointSize,oe=void 0===ie?6:ie,ne=e.pointColor,ae=void 0===ne?{from:"color"}:ne,le=e.pointBorderWidth,ue=void 0===le?0:le,de=e.pointBorderColor,ce=void 0===de?{theme:"background"}:de,he=e.enablePointLabel,fe=void 0!==he&&he,pe=e.pointLabel,ve=void 0===pe?"yFormatted":pe,ye=e.pointLabelYOffset,me=e.defs,ge=void 0===me?[]:me,Re=e.fill,Te=void 0===Re?[]:Re,qe=e.markers,Oe=e.legends,Se=void 0===Oe?[]:Oe,Ce=e.isInteractive,ke=void 0===Ce||Ce,Ee=e.useMesh,We=void 0!==Ee&&Ee,Ge=e.debugMesh,Pe=void 0!==Ge&&Ge,je=e.onMouseEnter,Fe=e.onMouseMove,Ve=e.onMouseLeave,Ye=e.onClick,De=e.onTouchStart,Xe=e.onTouchMove,Ae=e.onTouchEnd,Ie=e.tooltip,ze=void 0===Ie?te:Ie,He=e.enableSlices,Je=void 0!==He&&He,Ke=e.debugSlices,Ne=void 0!==Ke&&Ke,Qe=e.sliceTooltip,Ue=void 0===Qe?se:Qe,Ze=e.enableCrosshair,$e=void 0===Ze||Ze,_e=e.crosshairType,ei=void 0===_e?"bottom-left":_e,ii=e.enableTouchCrosshair,oi=void 0!==ii&&ii,ri=e.role,ni=void 0===ri?"img":ri,ti=T(x,R,g),ai=ti.margin,si=ti.innerWidth,li=ti.innerHeight,ui=ti.outerWidth,di=ti.outerHeight,ci=be({data:i,xScale:n,xFormat:t,yScale:l,yFormat:u,width:si,height:li,colors:m,curve:p,areaBaselineValue:y,pointColor:ae,pointBorderColor:ce,enableSlices:Je}),hi=ci.legendData,fi=ci.toggleSerie,pi=ci.lineGenerator,vi=ci.areaGenerator,yi=ci.series,bi=ci.xScale,mi=ci.yScale,gi=ci.slices,xi=ci.points,Ri=d(),Ti=E(ae,Ri),qi=E(ce,Ri),Mi=r(null),Oi=Mi[0],Si=Mi[1],Ci=r(null),wi=Ci[0],ki=Ci[1],Bi={grid:Q(W,{theme:Ri,width:si,height:li,xScale:j?bi:null,yScale:Y?mi:null,xValues:D,yValues:X},"grid"),markers:Q(q,{markers:qe,width:si,height:li,xScale:bi,yScale:mi,theme:Ri},"markers"),axes:Q(G,{xScale:bi,yScale:mi,width:si,height:li,theme:Ri,top:S,right:C,bottom:k,left:L},"axes"),areas:null,lines:Q(Me,{lines:yi,lineGenerator:pi,lineWidth:I},"lines"),slices:null,points:null,crosshair:null,mesh:null,legends:Se.map((function(e,i){return Q(V,re({},e,{containerWidth:si,containerHeight:li,data:e.data||hi,theme:Ri,toggleSerie:e.toggleSerie?fi:void 0}),"legend."+i)}))},Ei=M(ge,yi,Te);return J&&(Bi.areas=Q(xe,{areaGenerator:vi,areaOpacity:N,areaBlendMode:Z,lines:yi},"areas")),ke&&!1!==Je&&(Bi.slices=Q(we,{slices:gi,axis:Je,debug:Ne,height:li,tooltip:Ue,current:wi,setCurrent:ki,onMouseEnter:je,onMouseMove:Fe,onMouseLeave:Ve,onClick:Ye,onTouchStart:De,onTouchMove:Xe,onTouchEnd:Ae},"slices")),_&&(Bi.points=Q(Be,{points:xi,symbol:ee,size:oe,color:Ti,borderWidth:ue,borderColor:qi,enableLabel:fe,label:ve,labelYOffset:ye},"points")),ke&&$e&&(null!==Oi&&(Bi.crosshair=Q(z,{width:si,height:li,x:Oi.x,y:Oi.y,type:ei},"crosshair")),null!==wi&&(Bi.crosshair=Q(z,{width:si,height:li,x:wi.x,y:wi.y,type:Je},"crosshair"))),ke&&We&&!1===Je&&(Bi.mesh=Q(Le,{points:xi,width:si,height:li,margin:ai,current:Oi,setCurrent:Si,onMouseEnter:je,onMouseMove:Fe,onMouseLeave:Ve,onClick:Ye,onTouchStart:De,onTouchMove:Xe,onTouchEnd:Ae,tooltip:ze,enableTouchCrosshair:oi,debug:Pe},"mesh")),Q(O,{defs:Ei,width:ui,height:di,margin:ai,role:ni,children:h.map((function(i,o){return"function"==typeof i?Q(a,{children:i(re({},e,{innerWidth:si,innerHeight:li,series:yi,slices:gi,points:xi,xScale:bi,yScale:mi,lineGenerator:pi,areaGenerator:vi,currentPoint:Oi,setCurrentPoint:Si,currentSlice:wi,setCurrentSlice:ki}))},o):Bi[i]}))})};We.propTypes=ue;var Ge=R(We),Pe=function(e){return Q(S,{children:function(i){var o=i.width,r=i.height;return Q(Ge,re({width:o,height:r},e))}})},je=function(e){var i=l(null),o=e.width,a=e.height,s=e.margin,c=e.pixelRatio,h=void 0===c?"undefined"!=typeof window&&window.devicePixelRatio||1:c,f=e.data,p=e.xScale,v=void 0===p?{type:"point"}:p,y=e.xFormat,b=e.yScale,m=void 0===b?{type:"linear",min:0,max:"auto"}:b,g=e.yFormat,x=e.curve,R=void 0===x?"linear":x,q=e.layers,M=void 0===q?["grid","markers","axes","areas","crosshair","lines","points","slices","mesh","legends"]:q,O=e.colors,S=void 0===O?{scheme:"nivo"}:O,k=e.lineWidth,B=void 0===k?2:k,E=e.enableArea,L=void 0!==E&&E,W=e.areaBaselineValue,G=void 0===W?0:W,F=e.areaOpacity,V=void 0===F?.2:F,D=e.enablePoints,X=void 0===D||D,A=e.pointSize,z=void 0===A?6:A,H=e.pointColor,J=void 0===H?{from:"color"}:H,K=e.pointBorderWidth,N=void 0===K?0:K,U=e.pointBorderColor,Z=void 0===U?{theme:"background"}:U,$=e.enableGridX,_=void 0===$||$,ne=e.gridXValues,ae=e.enableGridY,se=void 0===ae||ae,le=e.gridYValues,ue=e.axisTop,de=e.axisRight,ce=e.axisBottom,he=void 0===ce?{}:ce,fe=e.axisLeft,pe=void 0===fe?{}:fe,ve=e.legends,ye=void 0===ve?[]:ve,me=e.isInteractive,ge=void 0===me||me,xe=e.debugMesh,Re=void 0!==xe&&xe,Te=e.onMouseLeave,qe=e.onClick,Me=e.tooltip,Oe=void 0===Me?te:Me,Se=e.canvasRef,Ce=T(o,a,s),we=Ce.margin,ke=Ce.innerWidth,Be=Ce.innerHeight,Ee=Ce.outerWidth,Le=Ce.outerHeight,We=d(),Ge=r(null),Pe=Ge[0],je=Ge[1],Fe=be({data:f,xScale:v,xFormat:y,yScale:m,yFormat:g,width:ke,height:Be,colors:S,curve:R,areaBaselineValue:G,pointColor:J,pointBorderColor:Z}),Ve=Fe.lineGenerator,Ye=Fe.areaGenerator,De=Fe.series,Xe=Fe.xScale,Ae=Fe.yScale,Ie=Fe.points,ze=ee({points:Ie,width:ke,height:Be,debug:Re}),He=ze.delaunay,Je=ze.voronoi;u((function(){Se&&(Se.current=i.current),i.current.width=Ee*h,i.current.height=Le*h;var e=i.current.getContext("2d");e.scale(h,h),e.fillStyle=We.background,e.fillRect(0,0,Ee,Le),e.translate(we.left,we.top),M.forEach((function(i){if("function"==typeof i&&i({ctx:e,innerWidth:ke,innerHeight:Be,series:De,points:Ie,xScale:Xe,yScale:Ae,lineWidth:B,lineGenerator:Ve,areaGenerator:Ye,currentPoint:Pe,setCurrentPoint:je}),"grid"===i&&We.grid.line.strokeWidth>0&&(e.lineWidth=We.grid.line.strokeWidth,e.strokeStyle=We.grid.line.stroke,_&&P(e,{width:ke,height:Be,scale:Xe,axis:"x",values:ne}),se&&P(e,{width:ke,height:Be,scale:Ae,axis:"y",values:le})),"axes"===i&&j(e,{xScale:Xe,yScale:Ae,width:ke,height:Be,top:ue,right:de,bottom:he,left:pe,theme:We}),"areas"===i&&!0===L&&(e.save(),e.globalAlpha=V,Ye.context(e),De.forEach((function(i){e.fillStyle=i.color,e.beginPath(),Ye(i.data.map((function(e){return e.position}))),e.fill()})),e.restore()),"lines"===i&&(Ve.context(e),De.forEach((function(i){e.strokeStyle=i.color,e.lineWidth=B,e.beginPath(),Ve(i.data.map((function(e){return e.position}))),e.stroke()}))),"points"===i&&!0===X&&z>0&&Ie.forEach((function(i){e.fillStyle=i.color,e.beginPath(),e.arc(i.x,i.y,z/2,0,2*Math.PI),e.fill(),N>0&&(e.strokeStyle=i.borderColor,e.lineWidth=N,e.stroke())})),"mesh"===i&&!0===Re&&(ie(e,Je),Pe&&oe(e,Je,Pe.index)),"legends"===i){var o=De.map((function(e){return{id:e.id,label:e.id,color:e.color}})).reverse();ye.forEach((function(i){Y(e,re({},i,{data:i.data||o,containerWidth:ke,containerHeight:Be,theme:We}))}))}}))}),[i,Ee,Le,M,We,Ve,De,Xe,Ae,_,ne,se,le,ue,de,he,pe,ye,Ie,X,z,Pe]);var Ke=n((function(e){var o=C(i.current,e),r=o[0],n=o[1];if(!w(we.left,we.top,ke,Be,r,n))return null;var t=He.find(r-we.left,n-we.top);return Ie[t]}),[i,we,ke,Be,He]),Ne=I(),Qe=Ne.showTooltipFromEvent,Ue=Ne.hideTooltip,Ze=n((function(e){var i=Ke(e);je(i),i?Qe(t(Oe,{point:i}),e):Ue()}),[Ke,je,Qe,Ue,Oe]),$e=n((function(e){Ue(),je(null),Pe&&Te&&Te(Pe,e)}),[Ue,je,Te]),_e=n((function(e){if(qe){var i=Ke(e);i&&qe(i,e)}}),[Ke,qe]);return Q("canvas",{ref:i,width:Ee*h,height:Le*h,style:{width:Ee,height:Le,cursor:ge?"auto":"normal"},onMouseEnter:ge?Ze:void 0,onMouseMove:ge?Ze:void 0,onMouseLeave:ge?$e:void 0,onClick:ge?_e:void 0})};je.propTypes=de;var Fe=R(je),Ve=s((function(e,i){return Q(Fe,re({},e,{canvasRef:i}))})),Ye=s((function(e,i){return Q(S,{children:function(o){var r=o.width,n=o.height;return Q(Ve,re({width:r,height:n},e,{ref:i}))}})}));export{Ge as Line,Ve as LineCanvas,fe as LineCanvasDefaultProps,de as LineCanvasPropTypes,he as LineDefaultProps,ue as LinePropTypes,Pe as ResponsiveLine,Ye as ResponsiveLineCanvas,ve as useAreaGenerator,be as useLine,pe as useLineGenerator,ye as useSlices};
//# sourceMappingURL=nivo-line.es.js.map
